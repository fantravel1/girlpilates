{{ define "main" }}
<!-- Taxonomy Term Page (e.g., /difficulties/beginner/, /muscles/core/) -->
<section class="relative min-h-[250px] lg:min-h-[350px] flex items-center overflow-hidden">
  <!-- Background Image -->
  <div class="absolute inset-0">
    <img
      src="/images/hero/freepik__candid-i-with-natural-textures-and-highly-realisti__15913.webp"
      alt="{{ .Title }}"
      class="w-full h-full object-cover"
    />
    <!-- Gradient Overlay -->
    <div class="absolute inset-0
      {{ if eq .Data.Plural "difficulties" }}
        {{ if or (eq .Title "beginner") (eq .Title "principiante") }}
        bg-gradient-to-r from-green-900/85 via-green-800/75 to-green-900/70
        {{ else if or (eq .Title "intermediate") (eq .Title "intermedio") }}
        bg-gradient-to-r from-yellow-900/85 via-yellow-800/75 to-yellow-900/70
        {{ else if or (eq .Title "advanced") (eq .Title "avanzado") }}
        bg-gradient-to-r from-red-900/85 via-red-800/75 to-red-900/70
        {{ else }}
        bg-gradient-to-r from-pink-900/85 via-purple-900/75 to-pink-900/70
        {{ end }}
      {{ else }}
      bg-gradient-to-r from-pink-900/85 via-purple-900/75 to-pink-900/70
      {{ end }}
    "></div>
  </div>

  <!-- Content -->
  <div class="container relative z-10 py-12 lg:py-16">
    <div class="max-w-3xl">
      <!-- Breadcrumb -->
      <nav class="mb-4">
        <ol class="flex items-center gap-2 text-white/70 text-sm">
          <li><a href="{{ "/" | relLangURL }}" class="hover:text-white">{{ i18n "home" | default "Home" }}</a></li>
          <li><span class="mx-1">/</span></li>
          <li><a href="{{ "/exercises/" | relLangURL }}" class="hover:text-white">{{ i18n "exercises" | default "Exercises" }}</a></li>
          <li><span class="mx-1">/</span></li>
          {{ if eq .Data.Plural "difficulties" }}
          <li><a href="{{ "/difficulties/" | relLangURL }}" class="hover:text-white">{{ i18n "difficulty" | default "Difficulty" }}</a></li>
          {{ else if eq .Data.Plural "muscles" }}
          <li><a href="{{ "/muscles/" | relLangURL }}" class="hover:text-white">{{ i18n "muscles" | default "Muscles" }}</a></li>
          {{ else if eq .Data.Plural "equipment" }}
          <li><a href="{{ "/equipment/" | relLangURL }}" class="hover:text-white">{{ i18n "equipment" | default "Equipment" }}</a></li>
          {{ end }}
          <li><span class="mx-1">/</span></li>
          <li class="text-white font-medium">{{ .Title | title }}</li>
        </ol>
      </nav>

      <h1 class="text-3xl lg:text-5xl font-bold text-white mb-4 drop-shadow-lg">
        {{ if eq .Data.Plural "difficulties" }}
          {{ if or (eq .Title "beginner") (eq .Title "principiante") }}
            {{ i18n "beginner_exercises" | default "Beginner Exercises" }}
          {{ else if or (eq .Title "intermediate") (eq .Title "intermedio") }}
            {{ i18n "intermediate_exercises" | default "Intermediate Exercises" }}
          {{ else if or (eq .Title "advanced") (eq .Title "avanzado") }}
            {{ i18n "advanced_exercises" | default "Advanced Exercises" }}
          {{ else }}
            {{ .Title | title }} {{ i18n "exercises" | default "Exercises" }}
          {{ end }}
        {{ else if eq .Data.Plural "muscles" }}
          {{ .Title | title }} {{ i18n "exercises" | default "Exercises" }}
        {{ else if eq .Data.Plural "equipment" }}
          {{ .Title | title }} {{ i18n "exercises" | default "Exercises" }}
        {{ else }}
          {{ .Title | title }}
        {{ end }}
      </h1>
      <p class="text-lg lg:text-xl text-white/90 max-w-2xl drop-shadow">
        {{ if eq .Data.Plural "difficulties" }}
          {{ if or (eq .Title "beginner") (eq .Title "principiante") }}
            {{ i18n "beginner_desc" | default "Perfect for those new to Pilates. Focus on proper form, breathing, and core engagement." }}
          {{ else if or (eq .Title "intermediate") (eq .Title "intermedio") }}
            {{ i18n "intermediate_desc" | default "Build on your foundation with more challenging movements and increased complexity." }}
          {{ else if or (eq .Title "advanced") (eq .Title "avanzado") }}
            {{ i18n "advanced_desc" | default "Master-level exercises requiring full-body control, strength, and precision." }}
          {{ end }}
        {{ else if eq .Data.Plural "muscles" }}
          {{ i18n "muscle_target_desc" | default "Exercises targeting the" }} {{ .Title | lower }}.
        {{ else if eq .Data.Plural "equipment" }}
          {{ i18n "equipment_desc" | default "Exercises using" }} {{ .Title | lower }}.
        {{ end }}
      </p>
      <div class="mt-4">
        <span class="inline-flex items-center gap-2 text-white/80 text-sm">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
          </svg>
          {{ len .Pages }} {{ if eq (len .Pages) 1 }}{{ i18n "exercise" | default "exercise" }}{{ else }}{{ i18n "exercises" | default "exercises" }}{{ end }}
        </span>
      </div>
    </div>
  </div>
</section>

<div class="container py-8 lg:py-12">
  <!-- Difficulty Level Indicator (for difficulty taxonomy) -->
  {{ if eq .Data.Plural "difficulties" }}
  <div class="mb-8 flex flex-wrap gap-3">
    <a href="{{ "/difficulties/beginner/" | relLangURL }}"
       class="px-4 py-2 rounded-full text-sm font-medium transition-all
       {{ if or (eq .Title "beginner") (eq .Title "principiante") }}
       bg-green-100 text-green-700 ring-2 ring-green-500
       {{ else }}
       bg-gray-100 text-gray-600 hover:bg-green-50 hover:text-green-600
       {{ end }}">
      {{ i18n "beginner" | default "Beginner" }}
    </a>
    <a href="{{ "/difficulties/intermediate/" | relLangURL }}"
       class="px-4 py-2 rounded-full text-sm font-medium transition-all
       {{ if or (eq .Title "intermediate") (eq .Title "intermedio") }}
       bg-yellow-100 text-yellow-700 ring-2 ring-yellow-500
       {{ else }}
       bg-gray-100 text-gray-600 hover:bg-yellow-50 hover:text-yellow-600
       {{ end }}">
      {{ i18n "intermediate" | default "Intermediate" }}
    </a>
    <a href="{{ "/difficulties/advanced/" | relLangURL }}"
       class="px-4 py-2 rounded-full text-sm font-medium transition-all
       {{ if or (eq .Title "advanced") (eq .Title "avanzado") }}
       bg-red-100 text-red-700 ring-2 ring-red-500
       {{ else }}
       bg-gray-100 text-gray-600 hover:bg-red-50 hover:text-red-600
       {{ end }}">
      {{ i18n "advanced" | default "Advanced" }}
    </a>
  </div>
  {{ end }}

  <!-- Exercise Grid -->
  {{ if .Pages }}
  <div class="exercise-grid grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
    {{ range .Pages }}
    <article class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow">
      {{ with .Params.image }}
      <a href="{{ $.RelPermalink }}" class="block aspect-video bg-gray-100">
        <img src="{{ . }}" alt="{{ $.Title }}" class="w-full h-full object-cover" loading="lazy">
      </a>
      {{ else }}
      <a href="{{ .RelPermalink }}" class="block aspect-video bg-gradient-to-br from-pink-100 to-purple-100 flex items-center justify-center">
        <svg class="w-16 h-16 text-pink-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
        </svg>
      </a>
      {{ end }}
      <div class="p-5">
        <h3 class="text-lg font-semibold mb-2">
          <a href="{{ .RelPermalink }}" class="hover:text-pink-600 transition-colors">{{ .Title }}</a>
        </h3>
        {{ with .Description }}
        <p class="text-gray-600 text-sm line-clamp-2">{{ . }}</p>
        {{ else }}
        <p class="text-gray-600 text-sm line-clamp-2">{{ .Summary | truncate 120 }}</p>
        {{ end }}
        <div class="mt-3 flex flex-wrap gap-2">
          {{ with .Params.difficulty }}
          <span class="inline-block px-2 py-1 text-xs font-medium rounded-full
            {{ if or (eq . "beginner") (eq . "principiante") }}bg-green-100 text-green-700{{ end }}
            {{ if or (eq . "intermediate") (eq . "intermedio") }}bg-yellow-100 text-yellow-700{{ end }}
            {{ if or (eq . "advanced") (eq . "avanzado") }}bg-red-100 text-red-700{{ end }}
          ">{{ . | title }}</span>
          {{ end }}
          {{ with .Params.duration }}
          <span class="inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full">{{ . }}s</span>
          {{ end }}
        </div>
      </div>
    </article>
    {{ end }}
  </div>
  {{ else }}
  <div class="text-center py-12">
    <p class="text-gray-500">{{ i18n "no_exercises_found" | default "No exercises found in this category." }}</p>
  </div>
  {{ end }}

  <!-- Pagination -->
  {{ template "_internal/pagination.html" . }}

  <!-- Back Links -->
  <div class="mt-12 flex flex-wrap justify-center gap-4">
    <a href="{{ "/exercises/" | relLangURL }}" class="inline-flex items-center gap-2 text-pink-600 hover:text-pink-700 font-medium">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
      </svg>
      {{ i18n "back_to_exercises" | default "Back to all exercises" }}
    </a>
  </div>
</div>
{{ end }}
