{{ define "main" }}
<!-- Hero Section with Background Image -->
<section class="relative min-h-[300px] lg:min-h-[400px] flex items-center overflow-hidden">
  <!-- Background Image -->
  <div class="absolute inset-0">
    <img
      src="/images/hero/freepik__candid-i-with-natural-textures-and-highly-realisti__15914.webp"
      alt="Learn Pilates"
      class="w-full h-full object-cover"
    />
    <!-- Gradient Overlay -->
    <div class="absolute inset-0 bg-gradient-to-r from-blue-900/85 via-purple-900/75 to-blue-900/70"></div>
  </div>

  <!-- Content -->
  <div class="container relative z-10 py-12 lg:py-16">
    <div class="max-w-3xl">
      <h1 class="text-3xl lg:text-5xl font-bold text-white mb-4 drop-shadow-lg">{{ .Title }}</h1>
      {{ with .Description }}
      <p class="text-lg lg:text-xl text-white/90 max-w-2xl drop-shadow">{{ . }}</p>
      {{ end }}
    </div>
  </div>
</section>

<div class="container py-8 lg:py-12">
  <!-- Main Learn Page - Show All Sections -->
  {{ if eq .RelPermalink "/learn/" }}

  <!-- Featured Sections Grid -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-gray-900 mb-6">{{ i18n "explore_topics" | default "Explore Topics" }}</h2>
    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">

      <!-- Fundamentals -->
      <a href="/learn/fundamentals/" class="group block bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-6 hover:shadow-lg transition-all border border-pink-200">
        <div class="w-12 h-12 bg-pink-600 rounded-xl flex items-center justify-center mb-4">
          <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
          </svg>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-pink-600 transition-colors">{{ i18n "fundamentals" | default "Pilates Fundamentals" }}</h3>
        <p class="text-gray-600 text-sm mb-4">{{ i18n "fundamentals_desc" | default "Master the six principles, breathing techniques, and core concepts that make Pilates unique." }}</p>
        <span class="text-pink-600 text-sm font-medium">8 {{ i18n "articles" | default "articles" }} →</span>
      </a>

      <!-- Anatomy -->
      <a href="/learn/anatomy/" class="group block bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 hover:shadow-lg transition-all border border-purple-200">
        <div class="w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center mb-4">
          <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
          </svg>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-purple-600 transition-colors">{{ i18n "anatomy" | default "Anatomy & Body" }}</h3>
        <p class="text-gray-600 text-sm mb-4">{{ i18n "anatomy_desc" | default "Understand your core muscles, spine health, pelvic floor, and posture for better movement." }}</p>
        <span class="text-purple-600 text-sm font-medium">4 {{ i18n "articles" | default "articles" }} →</span>
      </a>

      <!-- Women's Health -->
      <a href="/learn/womens-health/" class="group block bg-gradient-to-br from-rose-50 to-rose-100 rounded-xl p-6 hover:shadow-lg transition-all border border-rose-200">
        <div class="w-12 h-12 bg-rose-600 rounded-xl flex items-center justify-center mb-4">
          <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
          </svg>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-rose-600 transition-colors">{{ i18n "womens_health" | default "Women's Health" }}</h3>
        <p class="text-gray-600 text-sm mb-4">{{ i18n "womens_health_desc" | default "Pilates during pregnancy, postpartum recovery, pelvic floor health, and menopause support." }}</p>
        <span class="text-rose-600 text-sm font-medium">4 {{ i18n "articles" | default "articles" }} →</span>
      </a>

      <!-- History -->
      <a href="/learn/history/" class="group block bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl p-6 hover:shadow-lg transition-all border border-amber-200">
        <div class="w-12 h-12 bg-amber-600 rounded-xl flex items-center justify-center mb-4">
          <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-amber-600 transition-colors">{{ i18n "history" | default "Pilates History" }}</h3>
        <p class="text-gray-600 text-sm mb-4">{{ i18n "history_desc" | default "Discover Joseph Pilates' story and how the method evolved over a century." }}</p>
        <span class="text-amber-600 text-sm font-medium">2 {{ i18n "articles" | default "articles" }} →</span>
      </a>

      <!-- Equipment -->
      <a href="/learn/equipment/" class="group block bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 hover:shadow-lg transition-all border border-blue-200">
        <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center mb-4">
          <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
          </svg>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors">{{ i18n "equipment_guide" | default "Equipment Guide" }}</h3>
        <p class="text-gray-600 text-sm mb-4">{{ i18n "equipment_desc" | default "Learn about mats, reformers, props, and how to choose the right equipment." }}</p>
        <span class="text-blue-600 text-sm font-medium">1 {{ i18n "article" | default "article" }} →</span>
      </a>

      <!-- Quick Start CTA -->
      <div class="bg-gray-900 rounded-xl p-6 text-white flex flex-col justify-between">
        <div>
          <h3 class="text-xl font-bold mb-2">{{ i18n "new_to_pilates" | default "New to Pilates?" }}</h3>
          <p class="text-gray-300 text-sm mb-4">{{ i18n "start_here" | default "Start with the Six Principles - they're the foundation for everything else." }}</p>
        </div>
        <a href="/learn/fundamentals/six-principles/" class="inline-flex items-center gap-2 text-pink-400 font-medium hover:text-pink-300 transition-colors">
          {{ i18n "read_six_principles" | default "Read the Six Principles" }}
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Content from _index.md -->
  {{ if .Content }}
  <div class="prose prose-lg prose-pink max-w-none mb-12">
    {{ .Content }}
  </div>
  {{ end }}

  {{ else }}
  <!-- Subsection Page (fundamentals, anatomy, etc.) -->

  <!-- Breadcrumb -->
  <nav class="mb-8 text-sm">
    <ol class="flex flex-wrap items-center gap-2 text-gray-500">
      <li><a href="/" class="hover:text-pink-600">{{ i18n "nav_home" | default "Home" }}</a></li>
      <li><span class="mx-1">/</span></li>
      <li><a href="/learn/" class="hover:text-pink-600">{{ i18n "nav_learn" | default "Learn" }}</a></li>
      <li><span class="mx-1">/</span></li>
      <li class="text-gray-900 font-medium">{{ .Title }}</li>
    </ol>
  </nav>

  <!-- Content from _index.md -->
  {{ if .Content }}
  <div class="prose prose-lg prose-pink max-w-none mb-12">
    {{ .Content }}
  </div>
  {{ end }}

  <!-- Articles in this section -->
  {{ $pages := .RegularPages }}
  {{ with $pages }}
  <section>
    <h2 class="text-2xl font-bold text-gray-900 mb-6">{{ i18n "articles_in_section" | default "Articles in this section" }}</h2>
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {{ range . }}
      <article class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md hover:border-pink-200 transition-all">
        <a href="{{ .RelPermalink }}" class="block p-5">
          <h3 class="text-lg font-semibold mb-2 text-gray-900 hover:text-pink-600 transition-colors">
            {{ .Title }}
          </h3>
          {{ with .Description }}
          <p class="text-gray-600 text-sm line-clamp-3 mb-3">{{ . }}</p>
          {{ else }}
          <p class="text-gray-600 text-sm line-clamp-3 mb-3">{{ .Summary | truncate 150 }}</p>
          {{ end }}
          <div class="flex items-center gap-2 text-xs text-gray-500">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            {{ .ReadingTime }} {{ i18n "min_read" | default "min read" }}
          </div>
        </a>
      </article>
      {{ end }}
    </div>
  </section>
  {{ end }}

  <!-- Back to Learn link -->
  <div class="mt-12 pt-8 border-t border-gray-200">
    <a href="/learn/" class="inline-flex items-center gap-2 text-gray-600 hover:text-pink-600 transition-colors">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
      </svg>
      {{ i18n "back_to_learn" | default "Back to Learn" }}
    </a>
  </div>
  {{ end }}
</div>
{{ end }}
