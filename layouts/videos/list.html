{{ define "main" }}
<article class="pb-16 lg:pb-24">
  <!-- Hero Section -->
  <div class="bg-gradient-to-br from-pink-50 to-purple-50 py-12 lg:py-16">
    <div class="container">
      <div class="max-w-4xl">
        <h1 class="text-3xl lg:text-5xl font-bold text-gray-900 mb-4">{{ .Title }}</h1>
        <p class="text-xl text-gray-600 mb-6">{{ .Description }}</p>
        <div class="flex items-center gap-2 text-pink-600">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814z"/>
            <polygon fill="white" points="9.545,15.568 15.818,12 9.545,8.432"/>
          </svg>
          <span class="text-lg font-medium">Free YouTube Instruction</span>
        </div>
      </div>
    </div>
  </div>

  <div class="container py-12">
    <!-- Curated Collections -->
    <section class="mb-16">
      <h2 class="text-2xl lg:text-3xl font-bold text-gray-900 mb-8">{{ i18n "video_collections" }}</h2>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {{ range $key, $collection := $.Site.Data.video_library.curated_collections }}
        <div class="bg-white rounded-xl border border-gray-100 p-6 shadow-sm hover:shadow-md transition-shadow">
          <h3 class="text-xl font-semibold text-gray-900 mb-2">{{ $collection.name }}</h3>
          <p class="text-gray-600 text-sm mb-4">{{ $collection.description }}</p>
          <div class="flex flex-wrap gap-1 mb-4">
            {{ range first 4 $collection.exercises }}
            <span class="px-2 py-1 bg-pink-50 text-pink-700 text-xs rounded-full">{{ . | humanize }}</span>
            {{ end }}
            {{ if gt (len $collection.exercises) 4 }}
            <span class="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full">+{{ sub (len $collection.exercises) 4 }} more</span>
            {{ end }}
          </div>
          <p class="text-xs text-gray-500">
            <span class="font-medium">{{ i18n "recommended_channels" }}:</span>
            {{ range $i, $ch := first 2 $collection.recommended_channels }}{{ if $i }}, {{ end }}{{ $ch | humanize }}{{ end }}
          </p>
        </div>
        {{ end }}
      </div>
    </section>

    <!-- Featured YouTube Channels with Thumbnails -->
    <section class="mb-16">
      <h2 class="text-2xl lg:text-3xl font-bold text-gray-900 mb-2">{{ i18n "recommended_channels" }}</h2>
      <p class="text-gray-600 mb-8">Certified instructors offering free Pilates classes on YouTube</p>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {{ range $key, $channel := $.Site.Data.video_library.channels }}
        <a href="{{ $channel.youtube_channel }}" target="_blank" rel="noopener" class="group bg-white rounded-xl border border-gray-100 overflow-hidden shadow-sm hover:shadow-lg hover:border-pink-200 transition-all">
          <!-- Featured Video Thumbnail -->
          {{ if $channel.featured_video }}
          <div class="relative aspect-video bg-gray-100 overflow-hidden">
            <img
              src="https://i.ytimg.com/vi/{{ $channel.featured_video.id }}/hqdefault.jpg"
              alt="{{ $channel.featured_video.title }}"
              class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
              loading="lazy"
            />
            <div class="absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-colors flex items-center justify-center">
              <div class="w-14 h-14 bg-pink-600/90 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform">
                <svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24">
                  <polygon points="5,3 19,12 5,21"/>
                </svg>
              </div>
            </div>
            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3">
              <p class="text-white text-sm font-medium truncate">{{ $channel.featured_video.title }}</p>
            </div>
          </div>
          {{ else }}
          <div class="aspect-video bg-gradient-to-br from-pink-100 to-purple-100 flex items-center justify-center">
            <svg class="w-16 h-16 text-pink-300" fill="currentColor" viewBox="0 0 24 24">
              <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814z"/>
              <polygon fill="white" points="9.545,15.568 15.818,12 9.545,8.432"/>
            </svg>
          </div>
          {{ end }}

          <!-- Channel Info -->
          <div class="p-4">
            <div class="flex items-start justify-between mb-2">
              <div>
                <h3 class="text-lg font-semibold text-gray-900 group-hover:text-pink-600 transition-colors">{{ $channel.name }}</h3>
                <p class="text-sm text-gray-500">{{ $channel.instructor }}</p>
              </div>
              <svg class="w-4 h-4 text-gray-400 group-hover:text-pink-600 transition-colors flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
              </svg>
            </div>

            <div class="flex items-center gap-2 mb-3">
              <svg class="w-4 h-4 text-red-600" fill="currentColor" viewBox="0 0 24 24">
                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814z"/>
                <polygon fill="white" points="9.545,15.568 15.818,12 9.545,8.432"/>
              </svg>
              <span class="text-sm text-gray-600">{{ $channel.subscribers }} {{ i18n "subscribers" }}</span>
            </div>

            <div class="flex flex-wrap gap-1 mb-2">
              {{ range first 3 $channel.specialty }}
              <span class="px-2 py-0.5 bg-purple-50 text-purple-700 text-xs rounded">{{ . }}</span>
              {{ end }}
              {{ if gt (len $channel.specialty) 3 }}
              <span class="px-2 py-0.5 bg-gray-100 text-gray-500 text-xs rounded">+{{ sub (len $channel.specialty) 3 }}</span>
              {{ end }}
            </div>

            <p class="text-xs text-gray-400">{{ $channel.certification }}</p>
          </div>
        </a>
        {{ end }}
      </div>
    </section>

    <!-- Legacy Teachers Video Resources -->
    <section>
      <h2 class="text-2xl lg:text-3xl font-bold text-gray-900 mb-2">Master Teacher Archives</h2>
      <p class="text-gray-600 mb-8">Find historical footage and teachings from Pilates pioneers and elders</p>

      <div class="grid md:grid-cols-2 gap-6">
        {{ range $.Site.Data.teachers.teachers }}
        {{ if .video_resources }}
        <div class="bg-gradient-to-br from-gray-50 to-white rounded-xl border border-gray-100 p-6">
          <div class="flex items-start gap-4">
            <div class="flex-shrink-0 w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center">
              <span class="text-pink-600 font-bold text-lg">{{ substr .name 0 1 }}</span>
            </div>
            <div class="flex-1">
              <h3 class="font-semibold text-gray-900">{{ .name }}</h3>
              <p class="text-sm text-pink-600 mb-2">{{ .title }}</p>
              <p class="text-sm text-gray-600 mb-3">{{ .video_resources.note }}</p>

              <div class="flex flex-wrap gap-2">
                {{ range .video_resources.search_terms }}
                <a href="https://www.youtube.com/results?search_query={{ . | urlquery }}" target="_blank" rel="noopener" class="inline-flex items-center gap-1 px-3 py-1 bg-white rounded-full text-xs text-gray-600 hover:bg-pink-50 hover:text-pink-700 border border-gray-200 transition-colors">
                  {{ . }}
                  <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>
                </a>
                {{ end }}
              </div>
            </div>
          </div>
        </div>
        {{ end }}
        {{ end }}
      </div>
    </section>

    <!-- Tips Section -->
    <section class="mt-16 bg-gradient-to-br from-pink-50 to-purple-50 rounded-2xl p-8 lg:p-12">
      <h2 class="text-2xl font-bold text-gray-900 mb-4">Tips for Finding Quality Pilates Videos</h2>
      <div class="grid md:grid-cols-2 gap-6">
        <div class="flex gap-4">
          <div class="flex-shrink-0 w-10 h-10 bg-pink-600 rounded-full flex items-center justify-center text-white font-bold">1</div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-1">Look for Certified Instructors</h3>
            <p class="text-sm text-gray-600">Check credentials like PMA, STOTT, BASI, or Balanced Body certification</p>
          </div>
        </div>
        <div class="flex gap-4">
          <div class="flex-shrink-0 w-10 h-10 bg-pink-600 rounded-full flex items-center justify-center text-white font-bold">2</div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-1">Start with Beginner Content</h3>
            <p class="text-sm text-gray-600">Master the fundamentals before advancing to more challenging exercises</p>
          </div>
        </div>
        <div class="flex gap-4">
          <div class="flex-shrink-0 w-10 h-10 bg-pink-600 rounded-full flex items-center justify-center text-white font-bold">3</div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-1">Watch Full Instructions First</h3>
            <p class="text-sm text-gray-600">Understand the movement before attempting it to prevent injury</p>
          </div>
        </div>
        <div class="flex gap-4">
          <div class="flex-shrink-0 w-10 h-10 bg-pink-600 rounded-full flex items-center justify-center text-white font-bold">4</div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-1">Choose Your Style</h3>
            <p class="text-sm text-gray-600">Classical Pilates follows the original method; contemporary adapts for modern bodies</p>
          </div>
        </div>
      </div>
    </section>
  </div>
</article>
{{ end }}
